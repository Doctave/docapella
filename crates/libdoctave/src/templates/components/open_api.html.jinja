{% from "components/markdown.html" import markdown %}

<div class="open-api-outer-container">
  <div class="open-api-inner-container">
    <div class="open-api-page-header">
      {% with breadcrumbs = page.breadcrumbs %}
          {% include "components/breadcrumbs.html" %}
      {% endwith %}

      <div class="prose open-api-tag-header">
        <h1>{{ page.ast.root.tag.name }}</h1>
      </div>

      {% if page.ast.root.tag.description_ast %}
        {{ markdown(page.ast.root.tag.description_ast) }}
      {% endif %}
    </div>

    <div class="open-api-operations">
      {% for operation in page.ast.root.operations %}
        <div class="open-api-operation">
          <div class="open-api-operation-header">
            <div>
              <span class="open-api-operation-method open-api-operation-method-{{ operation.method }}">{{ operation.method }}</span>
              <code class="open-api-operation-route-pattern">{{ operation.route_pattern }}</code>
            </div>
            <h2 id="{{ operation.anchor_tag }}">{{ operation.summary }}</h2>
          </div>

          {% if operation.description_ast %}
            {{ markdown(operation.description_ast) }}
          {% endif %}

          <div class="open-api-operation-tabs" x-data="{ activeIndex: 0 }">
            <div class="open-api-operation-tabs-header">
              {% if operation.request_body %}
                <button class="open-api-operation-tab" @click="activeIndex = 0">Request Body</button>
              {% endif %}
              {% if operation.query_params %}
                <button class="open-api-operation-tab" @click="activeIndex = 1">Query Params</button>
              {% endif %}
              {% if operation.header_params %}
                <button class="open-api-operation-tab" @click="activeIndex = 2">Header Params</button>
              {% endif %}
              {% if operation.path_params %}
                <button class="open-api-operation-tab" @click="activeIndex = 3">Path Params</button>
              {% endif %}
              {% if operation.cookie_params %}
                <button class="open-api-operation-tab" @click="activeIndex = 4">Cookie Params</button>
              {% endif %}
            </div>

            <div class="open-api-operation-tabs-content">
              {% if operation.request_body %}
                <div class="open-api-operation-tab-content" x-show="activeIndex == 0">
                  <h3>Request Body</h3>
                </div>
              {% endif %}
              {% if operation.query_params %}
                <div class="open-api-operation-tab-content" x-show="activeIndex == 1">
                  <h3>Query Params</h3>

                  {% for param in operation.query_params %}
                    {% with schema = param.schema, show_anonymous = false, is_root = true %}
                      {% include "components/open_api_schema.html" %}
                    {% endwith %}
                  {% endfor %}
                </div>
              {% endif %}
              {% if operation.header_params %}
                <div class="open-api-operation-tab-content" x-show="activeIndex == 2">
                  <h3>Header Params</h3>
                </div>
              {% endif %}
              {% if operation.path_params %}
                <div class="open-api-operation-tab-content" x-show="activeIndex == 3">
                  <h3>Path Params</h3>
                </div>
              {% endif %}
              {% if operation.cookie_params %}
                <div class="open-api-operation-tab-content" x-show="activeIndex == 4">
                  <h3>Cookie Params</h3>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="open-api-operation-inner">
            <div class="open-api-operation-inner-left">
            </div>
            <div class="open-api-operation-inner-right">
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  {% with footer = project.settings.footer %}
    {% include "footer.html" %}
  {% endwith %}
</div>
