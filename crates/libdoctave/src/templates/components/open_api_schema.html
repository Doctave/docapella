<div class="open-api-schema">
  <div class="open-api-schema-header">
    {% if schema.title %}
      <span class="open-api-schema-title">{{ schema.title }}</span>
    {% endif %}
    <span class="open-api-schema-type">{{ schema.type_name }}</span>
    {% if schema.required %}
      <span class="open-api-schema-required">required</span>
    {% endif %}
    {% if schema.deprecated %}
      <span class="open-api-schema-deprecated">deprecated</span>
    {% endif %}
    {% if schema.nullable %}
      <span class="open-api-schema-nullable">nullable</span>
    {% endif %}
  </div>

  {% if schema.description %}
    <p class="open-api-schema-description">{{ schema.description }}</p>
  {% endif %}

  <!-- Schema attributes -->
  <div class="open-api-schema-attributes">
    {% if schema.format %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Format:</span>
        <span class="open-api-schema-attribute-value">{{ schema.format }}</span>
      </div>
    {% endif %}

    {% if schema.pattern %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Pattern:</span>
        <code class="open-api-schema-attribute-value">{{ schema.pattern }}</code>
      </div>
    {% endif %}

    {% if schema.minimum %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Minimum:</span>
        <span class="open-api-schema-attribute-value">{{ schema.minimum }}</span>
      </div>
    {% endif %}

    {% if schema.maximum %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Maximum:</span>
        <span class="open-api-schema-attribute-value">{{ schema.maximum }}</span>
      </div>
    {% endif %}

    {% if schema.multiple_of %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Multiple of:</span>
        <span class="open-api-schema-attribute-value">{{ schema.multiple_of }}</span>
      </div>
    {% endif %}

    {% if schema.min_length %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Min length:</span>
        <span class="open-api-schema-attribute-value">{{ schema.min_length }}</span>
      </div>
    {% endif %}

    {% if schema.max_length %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Max length:</span>
        <span class="open-api-schema-attribute-value">{{ schema.max_length }}</span>
      </div>
    {% endif %}

    {% if schema.enumeration %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Allowed values:</span>
        <div class="open-api-schema-enum">
          {% for value in schema.enumeration %}
            <code class="open-api-schema-enum-value">{{ value }}</code>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if schema.default %}
      <div class="open-api-schema-attribute">
        <span class="open-api-schema-attribute-label">Default:</span>
        <code class="open-api-schema-attribute-value">{{ schema.default }}</code>
      </div>
    {% endif %}
  </div>

  <!-- Example -->
  {% if schema.example_string %}
    <div class="open-api-schema-example">
      <div class="open-api-schema-example-label">Example:</div>
      <pre class="open-api-schema-example-code"><code>{{ schema.example_string }}</code></pre>
    </div>
  {% endif %}

  <!-- Nested schemas (for objects, arrays, oneOf, anyOf, etc.) -->
  {% if schema.is_nested %}
    <div class="open-api-schema-nested">
      {% if schema.single_nested_schema %}
        <!-- Array items schema -->
        <div class="open-api-schema-array-items">
          <div class="open-api-schema-nested-title">Array items:</div>
          {% with schema = schema.single_nested_schema %}
            {% include "components/open_api_schema.html" %}
          {% endwith %}
        </div>
      {% else %}
        <!-- Object properties or combination schemas -->
        <div class="open-api-schema-properties">
          {% if schema.combination_explanation != "Child attributes" %}
            <div class="open-api-schema-combination-title">{{ schema.combination_explanation }}:</div>
          {% endif %}
          {% for nested_schema in schema.nested_schemas %}
            <div class="open-api-schema-nested-item">
              {% with schema = nested_schema %}
                {% include "components/open_api_schema.html" %}
              {% endwith %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  {% endif %}
</div>